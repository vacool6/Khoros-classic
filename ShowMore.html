<style>
  body {
    font-family: Arial, sans-serif;
    background-color: #f0f0f0;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    margin: 0;
  }

  .container {
    display: flex;
    flex-direction: column;
    width: 100%;
    max-width: 1200px;
    padding: 20px;
    box-sizing: border-box;
  }

  .card {
    background: #fff;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    padding: 20px;
    width: 100%;
    box-sizing: border-box;
    margin-bottom: 20px;
  }

  .card h3 {
    margin-top: 0;
    font-size: 1.2em;
    color: #333;
  }

  .card p {
    margin: 5px 0;
    color: #666;
  }

  .more-content {
    max-height: 0;
    margin: 1rem 0;
    overflow: hidden;
    transition: max-height 0.2s ease-in-out;
  }

  .show-more-link,
  .show-less-link {
    display: inline;
    cursor: pointer;
    font-weight: 700;
  }

  .show-less-link {
    display: inline-block;
  }

  .show-more-link:hover,
  .show-less-link:hover {
    text-decoration: underline;
    color: #007bff;
  }
</style>

<div class="container" id="user-container"></div>

<script>
  function createCard(id, subject, body, boardId, href) {
    function redirect() {
      console.log("Redirect", href);
      window.location.href = "/";
    }

    const card = document.createElement("div");
    card.className = "card";

    const h3 = document.createElement("h3");
    const p1 = document.createElement("p");
    const h4 = document.createElement("h4");
    const shortContent = document.createElement("p");
    const showMoreLink = document.createElement("p");
    const showLessLink = document.createElement("p");

    h3.textContent = id;
    p1.textContent = "Subject |  " + subject;
    h4.textContent = "Board ID | " + boardId;
    showMoreLink.innerText = "Show more";
    showLessLink.innerText = "Show Less";

    showMoreLink.className = "show-more-link";
    showLessLink.className = "show-less-link";

    shortContent.innerHTML =
      "This is a short description. Life can be challenging but it doest matter.Hereâ€™s a quick introduction... ";

    shortContent.appendChild(showMoreLink);

    showMoreLink.onclick = () => {
      moreContent.style.maxHeight = moreContent.scrollHeight + "px";
      showMoreLink.style.display = "none";
      showLessLink.style.display = "inline-block";
    };

    const moreContent = document.createElement("div");
    moreContent.className = "more-content";

    for (let i = 1; i <= 5; i++) {
      const para = document.createElement("p");
      para.textContent =
        "This is additional paragraph " +
        i +
        " for the expanded content. Lorem ipsum dolor sit amet, consectetur adipiscing elit.";
      moreContent.appendChild(para);
    }

    moreContent.appendChild(showLessLink);

    showLessLink.onclick = () => {
      if (
        moreContent.style.maxHeight === "0px" ||
        !moreContent.style.maxHeight
      ) {
        moreContent.style.maxHeight = moreContent.scrollHeight + "px";
      } else {
        moreContent.style.maxHeight = "0px";
      }
      showMoreLink.style.display = "inline";
    };

    card.appendChild(h3);
    card.appendChild(p1);
    card.appendChild(h4);
    card.appendChild(shortContent);
    card.appendChild(moreContent);

    return card;
  }

  async function fetchUsers() {
    try {
      const response = await fetch(
        "/api/2.0/search?q=select * from messages where author.id = '30036'"
      );

      const messages = await response.json();
      const container = document.getElementById("user-container");
      console.log(messages.data);
      messages.data.items.forEach((e) => {
        const card = createCard(e.id, e.subject, e.body, e.board.id, e.href);
        container.appendChild(card);
      });
    } catch (error) {
      console.error("Error fetching user data:", error);
    }
  }

  window.onload = fetchUsers;
</script>
